---
// Glass "pill" header — fixed above hero, centered, dark translucent.
// Removes the Book button, keeps logo on the left inside the pill.
// Replace your existing src/components/Header.astro with this file.
---
<header class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-screen-xl pointer-events-none">
  <!-- Desktop / md+ -->
  <div class="hidden md:flex items-center justify-center">
    <div
      class="relative flex items-center gap-1 rounded-full border border-white/10 bg-neutral-900/70 text-white
             backdrop-blur-md shadow-lg px-2 py-2 pointer-events-auto"
      role="navigation" aria-label="Primary"
    >
      <!-- Logo (inside the pill, aligned left) -->
      <a href="/" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-white/5 transition" aria-label="Home">
        <img src="/LOGO.webp" alt="D‑Essence Wellness" class="h-5 w-auto" onerror="this.style.display='none'">
        <span class="sr-only">D‑Essence Wellness</span>
      </a>

      <!-- Links -->
      <nav class="flex items-center gap-1">
        <a href="/" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">Home</a>

        <!-- Services with dropdown (mega menu) -->
        <div class="relative group">
          <a href="/services" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">Services</a>

          <!-- Mega menu -->
          <div
            class="invisible opacity-0 group-hover:visible group-hover:opacity-100 translate-y-1 group-hover:translate-y-0 transition
                   absolute left-1/2 -translate-x-1/2 top-full mt-2 w-[760px] bg-white text-neutral-900 border border-black/10
                   rounded-2xl shadow-2xl p-5 pointer-events-none group-hover:pointer-events-auto
                   before:content-[''] before:absolute before:left-0 before:right-0 before:-top-3 before:h-3"
          >
            <div class="grid grid-cols-2 gap-3">
              <a href="/services/neurotoxins" class="flex items-start gap-3 p-3 rounded-xl hover:bg-black/5 hover:ring-2 hover:ring-black/10 transition">
                <div class="w-9 h-9 rounded-xl bg-neutral-900 text-white flex items-center justify-center text-[11px]">NTX</div>
                <div>
                  <div class="text-sm font-semibold leading-tight">Neurotoxins</div>
                  <div class="text-xs text-black/60">Botox / Dysport</div>
                </div>
              </a>
              <a href="/services/juvederm-fillers" class="flex items-start gap-3 p-3 rounded-xl hover:bg-black/5 hover:ring-2 hover:ring-black/10 transition">
                <div class="w-9 h-9 rounded-xl bg-neutral-900 text-white flex items-center justify-center text-[11px]">JUV</div>
                <div>
                  <div class="text-sm font-semibold leading-tight">Juvederm Fillers</div>
                  <div class="text-xs text-black/60">HA fillers & contour</div>
                </div>
              </a>
              <a href="/services/chemical-peels" class="flex items-start gap-3 p-3 rounded-xl hover:bg-black/5 hover:ring-2 hover:ring-black/10 transition">
                <div class="w-9 h-9 rounded-xl bg-neutral-900 text-white flex items-center justify-center text-[11px]">PEEL</div>
                <div>
                  <div class="text-sm font-semibold leading-tight">Chemical Peels</div>
                  <div class="text-xs text-black/60">Clarity & texture</div>
                </div>
              </a>
              <a href="/services/microneedling" class="flex items-start gap-3 p-3 rounded-xl hover:bg-black/5 hover:ring-2 hover:ring-black/10 transition">
                <div class="w-9 h-9 rounded-xl bg-neutral-900 text-white flex items-center justify-center text-[11px]">MICRO</div>
                <div>
                  <div class="text-sm font-semibold leading-tight">Microneedling</div>
                  <div class="text-xs text-black/60">Collagen & smoothness</div>
                </div>
              </a>
            </div>
          </div>
        </div>

        <a href="/faq" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">FAQ</a>
        <a href="/about" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">About</a>
      </nav>
    </div>
  </div>

  <!-- Mobile -->
  <div class="md:hidden flex items-center justify-center">
    <div
      class="flex items-center justify-between w-[min(92vw,640px)] rounded-full border border-white/10 bg-neutral-900/70 text-white
             backdrop-blur-md shadow-lg px-3 py-2 pointer-events-auto"
    >
      <a href="/" class="flex items-center gap-2" aria-label="Home">
        <img src="/LOGO.webp" alt="D‑Essence Wellness" class="h-5 w-auto" onerror="this.style.display='none'">
        <span class="sr-only">D‑Essence Wellness</span>
      </a>

      <button id="nav-toggle"
        class="h-10 w-10 inline-flex items-center justify-center rounded-full hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/30"
        aria-expanded="false" aria-controls="mobile-nav"
      >
        <span class="sr-only">Menu</span>
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="opacity-90">
          <path stroke-linecap="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile dropdown panel -->
  <div id="mobile-nav" hidden class="md:hidden mt-2 w-[min(92vw,640px)] mx-auto rounded-2xl border border-black/10 bg-white shadow-lg overflow-hidden pointer-events-auto">
    <nav class="p-2 text-neutral-900">
      <a href="/" class="block px-3 py-2 rounded-lg hover:bg-black/5">Home</a>
      <a href="/services" class="block px-3 py-2 rounded-lg hover:bg-black/5">Services</a>
      <a href="/faq" class="block px-3 py-2 rounded-lg hover:bg-black/5">FAQ</a>
      <a href="/about" class="block px-3 py-2 rounded-lg hover:bg-black/5">About</a>
    </nav>
  </div>

  <script>
    // Mobile nav toggle
    const btn = document.getElementById('nav-toggle');
    const panel = document.getElementById('mobile-nav');
    if (btn && panel) {
      btn.addEventListener('click', () => {
        const open = !panel.hasAttribute('hidden');
        panel.toggleAttribute('hidden');
        btn.setAttribute('aria-expanded', (!open).toString());
      });
    }
  </script>
</header>
