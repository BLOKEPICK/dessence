---
---
<header class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-screen-xl pointer-events-none">
  
  <!-- Desktop -->
  <div class="hidden md:flex items-center justify-center">
    <nav id="main-nav" class="relative flex items-center gap-1 rounded-full border border-white/10 bg-black/60 backdrop-blur-md shadow-lg px-3 py-2 pointer-events-auto" aria-label="Primary">
      <!-- Wordmark -->
      <a href="/" class="flex items-center px-3 h-10 rounded-full hover:bg-white/5 transition" aria-label="Home">
        <span class="inline-flex items-baseline gap-1.5">
          <span class="text-white/95 font-semibold tracking-[0.06em] text-[14px]">D‑Essence</span>
          <span class="text-white/70 font-medium tracking-wide text-[12.5px]">Wellness</span>
        </span>
      </a>

      <!-- Categories (aligned to "Treatments we offer") -->
      <ul class="flex items-center gap-1 h-10">
        <!-- Injectables -->
        <li class="relative" data-nav-item>
          <button class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white" data-nav-trigger aria-haspopup="true" aria-expanded="false" aria-controls="panel-injectables">
            Injectables
            <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
            </svg>
          </button>
          <div id="panel-injectables" role="menu" class="absolute left-0 mt-2 w-[600px] max-w-[95vw] rounded-2xl border border-white/10 bg-black/70 backdrop-blur-md p-4 hidden" data-nav-panel>
            <div class="grid grid-cols-2 gap-2 text-sm">
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/neurotoxins">Neurotoxins (Botox/Dysport)</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/juvederm-fillers">Juvederm Fillers</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/skinvive">Skinvive</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/nefertiti-neck">Nefertiti Neck</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/filler-dissolving">Filler Dissolving</a>
            </div>
          </div>
        </li>

        <!-- Skin & Laser -->
        <li class="relative" data-nav-item>
          <button class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white" data-nav-trigger aria-haspopup="true" aria-expanded="false" aria-controls="panel-skin">
            Skin & Laser
            <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
            </svg>
          </button>
          <div id="panel-skin" role="menu" class="absolute left-0 mt-2 w-[680px] max-w-[95vw] rounded-2xl border border-white/10 bg-black/70 backdrop-blur-md p-4 hidden" data-nav-panel>
            <div class="grid grid-cols-3 gap-2 text-sm">
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/chemical-peels">Chemical Peels</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/microneedling">Microneedling</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/aerolase">Aerolase</a>
            </div>
          </div>
        </li>

        <!-- Facials -->
        <li class="relative" data-nav-item>
          <button class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white" data-nav-trigger aria-haspopup="true" aria-expanded="false" aria-controls="panel-facials">
            Facials
            <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
            </svg>
          </button>
          <div id="panel-facials" role="menu" class="absolute left-0 mt-2 w-[560px] max-w-[95vw] rounded-2xl border border-white/10 bg-black/70 backdrop-blur-md p-4 hidden" data-nav-panel>
            <div class="grid grid-cols-2 gap-2 text-sm">
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/facials">All Facials</a>
            </div>
          </div>
        </li>

        <!-- Waxing -->
        <li class="relative" data-nav-item>
          <button class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white" data-nav-trigger aria-haspopup="true" aria-expanded="false" aria-controls="panel-waxing">
            Waxing
            <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
            </svg>
          </button>
          <div id="panel-waxing" role="menu" class="absolute left-0 mt-2 w-[560px] max-w-[95vw] rounded-2xl border border-white/10 bg-black/70 backdrop-blur-md p-4 hidden" data-nav-panel>
            <div class="grid grid-cols-2 gap-2 text-sm">
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/waxing">All Waxing</a>
            </div>
          </div>
        </li>

        <!-- More Services -->
        <li class="relative" data-nav-item>
          <button class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white" data-nav-trigger aria-haspopup="true" aria-expanded="false" aria-controls="panel-more">
            More Services
            <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
            </svg>
          </button>
          <div id="panel-more" role="menu" class="absolute left-0 mt-2 w-[760px] max-w-[98vw] rounded-2xl border border-white/10 bg-black/70 backdrop-blur-md p-4 hidden" data-nav-panel>
            <div class="grid grid-cols-3 gap-2 text-sm">
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/vitamin-injections">Vitamin Injections</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/skincare">Skincare</a>
              <a class="block px-3 py-2 rounded-lg hover:bg-white/5 text-white/90 hover:text-white" href="/services/teeth-whitening">Teeth Whitening</a>
            </div>
          </div>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Mobile -->
  <div class="md:hidden pointer-events-auto px-4">
    <div class="flex items-center justify-between rounded-2xl border border-white/10 bg-neutral-900/75 text-white backdrop-blur-lg shadow-lg px-3 py-2">
      <a href="/" class="py-2" aria-label="Home">
        <span class="inline-flex items-baseline gap-1.5">
          <span class="text-white/95 font-semibold tracking-[0.06em] text-[14px]">D‑Essence</span>
          <span class="text-white/70 font-medium tracking-wide text-[12.5px]">Wellness</span>
        </span>
      </a>
      <button id="mobile-toggle" class="px-3 py-2 rounded-lg hover:bg-white/10" aria-expanded="false" aria-controls="mobile-nav">Menu</button>
    </div>
    <div id="mobile-nav" class="hidden mt-2 rounded-2xl border border-white/10 bg-neutral-900/95 text-white shadow-xl">
      <div class="p-3 text-sm">
        <div class="px-3 py-2 text-xs uppercase tracking-wide text-white/50">Injectables</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/botox">Botox®</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/xeomin">Xeomin®</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/daxxify">Daxxify®</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/botox-hyperhidrosis">Botox® for Hyperhidrosis</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/prp-microneedling">PRP Microneedling</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/prf-microneedling">PRF Microneedling</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/dermal-fillers">Dermal Fillers</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/juvederm-fillers">Juvederm® Collection</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/smooth-threads">Smooth Threads</a>

        <div class="px-3 pt-3 pb-2 text-xs uppercase tracking-wide text-white/50">Laser Treatments</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/acne">Aerolase — Acne</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/rosacea">Aerolase — Rosacea</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/hyperpigmentation">Aerolase — Hyperpigmentation</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/melasma">Aerolase — Melasma</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/skin-rejuvenation">Aerolase — Skin Rejuvenation</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/collagen-boosting">Aerolase — Collagen Boosting</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/psoriasis">Aerolase — Psoriasis</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/eczema">Aerolase — Eczema</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/aerolase/vascular-lesions">Aerolase — Vascular Lesions</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/laser-hair-removal">Laser Hair Removal</a>

        <div class="px-3 pt-3 pb-2 text-xs uppercase tracking-wide text-white/50">Advanced Skin Care</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/facials">Specialty Facials</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/chemical-peels/perfect-derma-peel">Perfect Derma Peel</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/chemical-peels/biorepeel">BioRePeel</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/microneedling">Microneedling</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/microneedling/skinpen">SkinPen® Microneedling</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/prp-microneedling">PRP Microneedling</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/prf-microneedling">PRF Microneedling</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/dermaplaning">Dermaplaning</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/enzyme-treatments">Enzyme Treatments</a>

        <div class="px-3 pt-3 pb-2 text-xs uppercase tracking-wide text-white/50">Wellness</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/b12">B12</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/l-carnitine">L‑Carnitine</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/amino-blend">Amino Blend</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/micc">MICC</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/lipo-plus">Lipo Plus</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/glutathione">Glutathione</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/tri-immune-boost">Tri‑Immune Boost</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/vitamin-injections/iv-infusions">IV Infusions</a>

        <div class="px-3 pt-3 pb-2 text-xs uppercase tracking-wide text-white/50">Aesthetic Services</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/waxing/full-face">Waxing — Full Face</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/waxing/brows">Waxing — Brows</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/waxing/bikini">Waxing — Bikini</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/waxing/body">Waxing — Body</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/teeth-whitening">Teeth Whitening</a>

        <div class="px-3 pt-3 pb-2 text-xs uppercase tracking-wide text-white/50">Events</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/events/botox-parties">Botox® Parties</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/events/spa-parties">Spa Parties</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/events/skincare-workshops">Skincare Workshops</a>

        <div class="px-3 pt-3 pb-2 text-xs uppercase tracking-wide text-white/50">Skincare Products</div>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/skincare/circadia">Circadia®</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/skincare/face-reality">Face Reality®</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/skincare/hydrinity">Hydrinity®</a>
        <a class="block px-3 py-2 rounded-lg hover:bg-white/5" href="/services/skincare/skinmedica">SkinMedica®</a>
      </div>
    </div>
  </div>
</header>

<script is:inline>
  const btn = document.getElementById('mobile-toggle');
  const nav = document.getElementById('mobile-nav');
  if (btn && nav) { btn.addEventListener('click', () => { const hidden = nav.classList.toggle('hidden'); btn.setAttribute('aria-expanded', (!hidden).toString()); }); }
</script>

<script is:inline>
  // Desktop dropdown logic: exclusive open, graceful close, outside click, ESC
  (function() {
    const nav = document.getElementById('main-nav');
    if (!nav) return;
    const items = Array.from(nav.querySelectorAll('[data-nav-item]'));
    const panels = () => Array.from(nav.querySelectorAll('[data-nav-panel]'));
    let closeTimer = null;

    function openOnly(item) {
      panels().forEach(p => p.classList.add('hidden'));
      items.forEach(i => i.querySelector('[data-nav-trigger]')?.setAttribute('aria-expanded', 'false'));
      const panel = item.querySelector('[data-nav-panel]');
      const btn = item.querySelector('[data-nav-trigger]');
      if (panel && btn) {
        panel.classList.remove('hidden');
        btn.setAttribute('aria-expanded', 'true');
      }
    }
    function closeAll() {
      panels().forEach(p => p.classList.add('hidden'));
      items.forEach(i => i.querySelector('[data-nav-trigger]')?.setAttribute('aria-expanded', 'false'));
    }

    items.forEach(item => {
      const btn = item.querySelector('[data-nav-trigger]');
      const panel = item.querySelector('[data-nav-panel]');
      if (!btn || !panel) return;

      item.addEventListener('mouseenter', () => { if (closeTimer) clearTimeout(closeTimer); openOnly(item); });
      item.addEventListener('mouseleave', () => { closeTimer = setTimeout(closeAll, 120); });

      btn.addEventListener('focus', () => openOnly(item));
      btn.addEventListener('blur', () => { closeTimer = setTimeout(closeAll, 120); });
      panel.addEventListener('mouseenter', () => { if (closeTimer) clearTimeout(closeTimer); });
      panel.addEventListener('mouseleave', () => { closeTimer = setTimeout(closeAll, 120); });
      panel.addEventListener('focusin', () => { if (closeTimer) clearTimeout(closeTimer); });
      panel.addEventListener('focusout', () => { closeTimer = setTimeout(closeAll, 120); });
    });

    document.addEventListener('click', (e) => { if (!nav.contains(e.target)) closeAll(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeAll(); });
  })();
</script>

