---
// Header with dark "glass/pill" and SOLID mega menu for Services.
// Replaces letter boxes with clean inline SVG icons in round chips.
---
<header class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-screen-xl pointer-events-none">
  <!-- Desktop / md+ -->
  <div class="hidden md:flex items-center justify-center">
    <div
      class="relative flex items-center gap-1 rounded-full border border-white/10 bg-neutral-900/70 text-white
             backdrop-blur-md shadow-lg px-3 py-2 pointer-events-auto"
      role="navigation" aria-label="Primary"
    >
      <!-- Wordmark -->
      <a href="/" class="flex items-center px-3 h-10 rounded-full hover:bg-white/5 transition" aria-label="Home">
        <span class="inline-flex items-baseline gap-1.5">
          <span class="text-white/95 font-semibold tracking-[0.06em] text-[14px]">D‑Essence</span>
          <span class="text-white/70 font-medium tracking-wide text-[12.5px]">Wellness</span>
        </span>
      </a>

      <!-- Links -->
      <nav class="flex items-center gap-1">
        <a href="/" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">Home</a>

        <!-- Services with SOLID mega menu -->
        <div class="relative group">
          <a href="/services" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">Services</a>

          <!-- Viewport scrim (improves contrast) -->
          <div
            class="fixed inset-0 -z-10 bg-black/30 backdrop-blur-[1px] opacity-0 invisible
                   group-hover:visible group-hover:opacity-100 transition pointer-events-none">
          </div>

          <!-- Solid mega menu -->
          <div
            class="invisible opacity-0 group-hover:visible group-hover:opacity-100 translate-y-1 group-hover:translate-y-0 transition
                   absolute left-1/2 -translate-x-1/2 top-full mt-2 w-[760px] rounded-2xl border border-white/12
                   bg-neutral-950 text-white shadow-2xl p-5 pointer-events-none group-hover:pointer-events-auto
                   before:content-[''] before:absolute before:left-0 before:right-0 before:-top-3 before:h-3"
          >
            <div class="mb-3 flex items-center justify-between px-1">
              <div class="text-xs uppercase tracking-wide text-white/65">Popular services</div>
              <a href="/services" class="text-xs font-medium text-white/90 hover:text-white underline decoration-white/40 hover:decoration-white">
                View all services →
              </a>
            </div>

            <div class="grid grid-cols-2 gap-2">
              <!-- Neurotoxins -->
              <a href="/services/neurotoxins"
                 class="group/item flex items-start gap-3 p-3 rounded-xl bg-white/[0.03] ring-1 ring-white/10 hover:bg-white/10 hover:ring-white/20 transition">
                <div class="flex items-center justify-center w-9 h-9 rounded-full bg-white/5 ring-1 ring-white/12">
                  <!-- Syringe icon -->
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M18 3l3 3" stroke-width="1.6" stroke-linecap="round"/>
                    <path d="M2 19l6-6" stroke-width="1.6" stroke-linecap="round"/>
                    <path d="M11 10l6 6" stroke-width="1.6"/>
                    <path d="M15 6l3 3" stroke-width="1.6"/>
                    <path d="M7 14l3 3" stroke-width="1.6"/>
                    <path d="M12 9l4-4 3 3-4 4" stroke-width="1.6" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="min-w-0">
                  <div class="text-sm font-semibold leading-tight">Neurotoxins</div>
                  <div class="text-xs text-white/75 truncate">Botox • Dysport • Smooth lines</div>
                </div>
              </a>

              <!-- Juvederm Fillers -->
              <a href="/services/juvederm-fillers"
                 class="group/item flex items-start gap-3 p-3 rounded-xl bg-white/[0.03] ring-1 ring-white/10 hover:bg-white/10 hover:ring-white/20 transition">
                <div class="flex items-center justify-center w-9 h-9 rounded-full bg-white/5 ring-1 ring-white/12">
                  <!-- Droplet + plus icon -->
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 3s-5 5.5-5 9a5 5 0 1 0 10 0c0-3.5-5-9-5-9z" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M18.5 7.5v3m-1.5-1.5h3" stroke-width="1.6" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="min-w-0">
                  <div class="text-sm font-semibold leading-tight">Juvederm Fillers</div>
                  <div class="text-xs text-white/75 truncate">HA fillers • contour &amp; volume</div>
                </div>
              </a>

              <!-- Chemical Peels -->
              <a href="/services/chemical-peels"
                 class="group/item flex items-start gap-3 p-3 rounded-xl bg-white/[0.03] ring-1 ring-white/10 hover:bg-white/10 hover:ring-white/20 transition">
                <div class="flex items-center justify-center w-9 h-9 rounded-full bg-white/5 ring-1 ring-white/12">
                  <!-- Layers icon -->
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 3l9 5-9 5-9-5 9-5z" stroke-width="1.6" stroke-linejoin="round"/>
                    <path d="M21 12l-9 5-9-5" stroke-width="1.6" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="min-w-0">
                  <div class="text-sm font-semibold leading-tight">Chemical Peels</div>
                  <div class="text-xs text-white/75 truncate">Clarity • tone • texture</div>
                </div>
              </a>

              <!-- Microneedling -->
              <a href="/services/microneedling"
                 class="group/item flex items-start gap-3 p-3 rounded-xl bg-white/[0.03] ring-1 ring-white/10 hover:bg-white/10 hover:ring-white/20 transition">
                <div class="flex items-center justify-center w-9 h-9 rounded-full bg-white/5 ring-1 ring-white/12">
                  <!-- Dots grid icon -->
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <circle cx="7" cy="7" r="1.2"/><circle cx="12" cy="7" r="1.2"/><circle cx="17" cy="7" r="1.2"/>
                    <circle cx="7" cy="12" r="1.2"/><circle cx="12" cy="12" r="1.2"/><circle cx="17" cy="12" r="1.2"/>
                    <circle cx="7" cy="17" r="1.2"/><circle cx="12" cy="17" r="1.2"/><circle cx="17" cy="17" r="1.2"/>
                  </svg>
                </div>
                <div class="min-w-0">
                  <div class="text-sm font-semibold leading-tight">Microneedling</div>
                  <div class="text-xs text-white/75 truncate">Collagen • smoothness</div>
                </div>
              </a>
            </div>
          </div>
        </div>

        <a href="/faq" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">FAQ</a>
        <a href="/about" class="px-4 h-10 rounded-full flex items-center text-sm hover:bg-white/10 transition">About</a>
      </nav>
    </div>
  </div>

  <!-- Mobile -->
  <div class="md:hidden flex items-center justify-center">
    <div
      class="flex items-center justify-between w-[min(92vw,640px)] rounded-full border border-white/10 bg-neutral-900/70 text-white
             backdrop-blur-md shadow-lg px-3 py-2 pointer-events-auto"
    >
      <a href="/" class="flex items-center px-2 h-10 rounded-full hover:bg-white/10 transition" aria-label="Home">
        <span class="inline-flex items-baseline gap-1.5">
          <span class="text-white/95 font-semibold tracking-[0.06em] text-[14px]">D‑Essence</span>
          <span class="text-white/70 font-medium tracking-wide text-[12.5px]">Wellness</span>
        </span>
      </a>

      <button id="nav-toggle"
        class="h-10 w-10 inline-flex items-center justify-center rounded-full hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/30"
        aria-expanded="false" aria-controls="mobile-nav"
      >
        <span class="sr-only">Menu</span>
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="opacity-90">
          <path stroke-linecap="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile dropdown panel -->
  <div id="mobile-nav" hidden class="md:hidden mt-2 w-[min(92vw,640px)] mx-auto rounded-2xl border border-black/10 bg-white shadow-lg overflow-hidden pointer-events-auto">
    <nav class="p-2 text-neutral-900">
      <a href="/" class="block px-3 py-2 rounded-lg hover:bg-black/5">Home</a>
      <a href="/services" class="block px-3 py-2 rounded-lg hover:bg-black/5">Services</a>
      <a href="/faq" class="block px-3 py-2 rounded-lg hover:bg-black/5">FAQ</a>
      <a href="/about" class="block px-3 py-2 rounded-lg hover:bg-black/5">About</a>
      <a href="/services" class="mt-1 block px-3 py-2 rounded-lg bg-neutral-900 text-white text-center hover:opacity-90">View all services</a>
    </nav>
  </div>

  <script>
    // Mobile nav toggle
    const btn = document.getElementById('nav-toggle');
    const panel = document.getElementById('mobile-nav');
    if (btn && panel) {
      btn.addEventListener('click', () => {
        const open = !panel.hasAttribute('hidden');
        panel.toggleAttribute('hidden');
        btn.setAttribute('aria-expanded', (!open).toString());
      });
    }
  </script>
</header>
