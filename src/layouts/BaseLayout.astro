---
export interface Props {
  seo?: {
    title?: string;
    description?: string;
    canonical?: string;
    type?: string;
    jsonLd?: any[];
  };
}
import "../styles/globals.css";
const { seo } = Astro.props;
const title = seo?.title ?? 'D-Essence Wellness';
const description = seo?.description ?? 'Modern Aesthetics, Evidence-Based Care';
const canonical = seo?.canonical ?? '/';
const type = seo?.type ?? 'website';
const jsonLd = seo?.jsonLd ?? [];
---

<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonical} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content={type} />
    <!-- Extra SEO -->
    <meta property="og:url" content="" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <!-- Opcionales: descomenta cuando tengas los archivos -->
    <!-- <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> -->
    <!-- <link rel="apple-touch-icon" href="/apple-touch-icon.png" /> -->

    <!-- Pro typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
    <style>
      :root { --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
      html, body { font-family: var(--font-sans); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility; }
    </style>

    <!-- Performance: preconnect dominios externos frecuentes -->
    <link rel="preconnect" href="https://na02.patientnow.com" />
    <link rel="dns-prefetch" href="https://na02.patientnow.com" />

    {jsonLd.length > 0 && (
      <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
    )}
  </head>

  <!-- Fondo global BLANCO (adiós tinte amarillento) -->
  <body class="min-h-full bg-white">
    <!-- Mobile nav controller -->
    <input id="nav-toggle" type="checkbox" class="peer sr-only" aria-hidden="true" />

    <!-- ===== HEADER ===== -->
    <header class="fixed top-4 left-1/2 -translate-x-1/2 z-[4000] w-full max-w-screen-xl pointer-events-none">
      <!-- Desktop -->
      <div class="hidden md:flex items-center justify-center pointer-events-auto">
        <nav class="relative flex items-center gap-1 rounded-full border border-white/10 bg-black/80 shadow-lg px-3 py-2 leading-none"
             aria-label="Primary" role="menubar">
          <!-- Logo -->
          <a href="/" class="flex items-center px-3 h-10 rounded-full hover:bg-white/5 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20" aria-label="Home">
            <span class="inline-flex items-center h-full">
              <span class="text-white/95 font-semibold tracking-[0.06em] text-[14px] leading-none">D-Essence</span>
              <span class="ml-1.5 text-white/70 font-medium tracking-wide text-[12.5px] leading-none">Wellness</span>
            </span>
          </a>

          <!-- Menu -->
          <ul class="flex items-center gap-1 h-10">
            <!-- Injectables -->
            <li class="relative group" role="none">
              <button
                class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20"
                type="button"
                role="menuitem"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="menu-injectables"
                data-menu-trigger="injectables"
              >
                Injectables
                <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
                </svg>
              </button>

              <div id="menu-injectables"
                   class="absolute left-1/2 -translate-x-1/2 top-full mt-2 w-[90vw] sm:w-[520px]
                          rounded-2xl border border-white/10 bg-neutral-950 z-[4050] shadow-2xl p-1
                          max-h-[70vh] overflow-auto
                          opacity-0 translate-y-1 pointer-events-none
                          transition duration-150
                          group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto
                          focus-within:opacity-100 focus-within:translate-y-0 focus-within:pointer-events-auto
                          before:content-[''] before:absolute before:-top-6 before:left-0 before:right-0 before:h-6"
                   role="menu" tabindex="-1" data-menu-panel="injectables">
                <ul class="divide-y divide-white/10">
                  <!-- NUEVO PRIMERO: Neurotoxins -->
                  <li><a href="/services/botox" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Neurotoxins<span class="opacity-60">→</span></a></li>
                  <!-- Eliminados: Botox, Xeomin, Daxxify, Therapeutic Massage -->
                  <li><a href="/services/botox-for-hyperhidrosis" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Botox for Hyperhidrosis<span class="opacity-60">→</span></a></li>
                  <li><a href="/services/juvederm-fillers" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Dermal Fillers — Juvederm Collection<span class="opacity-60">→</span></a></li>
                  <!-- PRP/PRF combinado (apunta a PRP por ahora) -->
                  <li><a href="/services/prp-microneedling" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">PRP/PRF<span class="opacity-60">→</span></a></li>
                  <li><a href="/services/smooth-threads" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Smooth Threads<span class="opacity-60">→</span></a></li>
                </ul>
              </div>
            </li>

            <!-- Laser (SIN submenú: solo link) -->
            <li role="none">
              <a href="/services/aerolase" class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20" role="menuitem">
                Laser
              </a>
            </li>

            <!-- Advanced Skin Care -->
            <li class="relative group" role="none">
              <button
                class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20"
                type="button"
                role="menuitem"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="menu-skin"
                data-menu-trigger="skin"
              >
                Advanced Skin Care
                <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
                </svg>
              </button>

              <div id="menu-skin"
                   class="absolute left-1/2 -translate-x-1/2 top-full mt-2 w-[90vw] sm:w-[520px]
                          rounded-2xl border border-white/10 bg-neutral-950 z-[4050] shadow-2xl p-1
                          max-h-[70vh] overflow-auto
                          opacity-0 translate-y-1 pointer-events-none
                          transition duration-150
                          group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto
                          focus-within:opacity-100 focus-within:translate-y-0 focus-within:pointer-events-auto
                          before:content-[''] before:absolute before:-top-6 before:left-0 before:right-0 before:h-6"
                   role="menu" tabindex="-1" data-menu-panel="skin">
                <ul class="divide-y divide-white/10">
                  <li><a href="/services/skinpen-microneedling" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">SkinPen® Microneedling<span class="opacity-60">→</span></a></li>
                  <li><a href="/services/chemical-peels" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Chemical Peels<span class="opacity-60">→</span></a></li>
                  <!-- Specialty → Signature (texto) -->
                  <li><a href="/services/specialty-facials" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Signature Facials<span class="opacity-60">→</span></a></li>
                  <li><a href="/services/acne-programs" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Acne Programs<span class="opacity-60">→</span></a></li>
                </ul>
              </div>
            </li>

            <!-- Wellness & IV -->
            <li class="relative group" role="none">
              <button
                class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20"
                type="button"
                role="menuitem"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="menu-wellness"
                data-menu-trigger="wellness"
              >
                Wellness &amp; IV
                <svg class="ml-1 w-4 h-4 opacity-70" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z" clip-rule="evenodd" />
                </svg>
              </button>

              <div id="menu-wellness"
                   class="absolute left-1/2 -translate-x-1/2 top-full mt-2 w-[90vw] sm:w-[420px]
                          rounded-2xl border border-white/10 bg-neutral-950 z-[4050] shadow-2xl p-1
                          max-h-[70vh] overflow-auto
                          opacity-0 translate-y-1 pointer-events-none
                          transition duration-150
                          group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto
                          focus-within:opacity-100 focus-within:translate-y-0 focus-within:pointer-events-auto
                          before:content-[''] before:absolute before:-top-6 before:left-0 before:right-0 before:h-6"
                   role="menu" tabindex="-1" data-menu-panel="wellness">
                <ul class="divide-y divide-white/10">
                  <li><a href="/services/vitamin-injections" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Vitamin Injections<span class="opacity-60">→</span></a></li>
                  <li><a href="/services/iv-therapy" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">IV Therapy<span class="opacity-60">→</span></a></li>
                  <!-- BUG FIX: ruta con slash inicial -->
                  <li><a href="/services/therapeutic-massage" class="flex items-center justify-between px-4 py-2.5 hover:bg-white/5 text-white/90 focus:outline-none focus:bg-white/10" role="menuitem" tabindex="-1">Therapeutic Massage<span class="opacity-60">→</span></a></li>
                </ul>
              </div>
            </li>

            <!-- Single links -->
            <li role="none"><a href="/about-us" class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20" role="menuitem">About Us</a></li>
            <li role="none"><a href="/contact-us" class="px-3 h-10 inline-flex items-center rounded-full hover:bg-white/5 transition text-white/90 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20" role="menuitem">Contact Us</a></li>
          </ul>
        </nav>
      </div>

      <!-- Mobile bar -->
      <div class="md:hidden px-4 pointer-events-auto">
        <div class="flex items-center justify-between rounded-2xl border border-white/10 bg-neutral-900/75 text-white backdrop-blur-lg shadow-lg px-3 py-2">
          <a href="/" class="py-2" aria-label="Home">
            <span class="inline-flex items-baseline gap-1.5">
              <span class="text-white/95 font-semibold tracking-[0.06em] text-[14px]">D-Essence</span>
              <span class="text-white/70 font-medium tracking-wide text-[12.5px]">Wellness</span>
            </span>
          </a>
          <label for="nav-toggle" class="p-2 rounded-lg hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20" aria-controls="mobile-drawer" aria-label="Open menu" role="button" tabindex="0">
            <svg class="w-6 h-6 peer-checked:hidden" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <svg class="w-6 h-6 hidden peer-checked:block" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </label>
        </div>
      </div>
    </header>

    <!-- Overlays for mobile -->
    <div class="fixed inset-0 z-[10000] bg-black/60 opacity-0 pointer-events-none transition-opacity duration-200 peer-checked:opacity-100 peer-checked:pointer-events-auto"></div>
    <div class="fixed inset-0 right-[8%] z-[10005] bg-black/10 backdrop-blur-[2px] opacity-0 pointer-events-none transition-opacity duration-200 peer-checked:opacity-100 peer-checked:pointer-events-auto"></div>

    <!-- ===== MOBILE DRAWER ===== -->
    <aside id="mobile-drawer"
      class="fixed right-0 top-0 z-[10010] h-dvh w-[92%] max-w-none bg-neutral-900 text-white border-l border-white/10 shadow-2xl translate-x-full transition-transform duration-200 will-change-transform peer-checked:translate-x-0"
      aria-modal="true" role="dialog">
      <!-- Header del drawer -->
      <div class="flex items-center justify-between px-3 py-3 border-b border-white/10">
        <button type="button" aria-label="Close menu"
          class="inline-flex items-center justify-center h-10 w-10 rounded-lg hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/20"
          data-close-drawer>
          <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <div class="text-sm text-white/60 pr-2">Menu</div>
      </div>

      <div class="h-[calc(100dvh-48px)] flex flex-col">
        <!-- Navegación -->
        <nav class="flex-1 overflow-auto py-2">
          <div class="px-2 space-y-2">
            <!-- Injectables -->
            <details class="group rounded-xl border border-white/10 bg-white/5 open:bg-white/[0.08] open:border-white/20 transition-colors">
              <summary class="list-none cursor-pointer flex items-center justify-between px-4 py-3">
                <span class="font-medium">Injectables</span>
                <svg class="w-5 h-5 transition-transform group-open:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z"/></svg>
              </summary>
              <div class="px-2 pb-2">
                <div class="mx-2 rounded-lg bg-white/5 ring-1 ring-white/10">
                  <!-- Neurotoxins primero -->
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/botox">Neurotoxins</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/botox-for-hyperhidrosis">Botox for Hyperhidrosis</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/juvederm-fillers">Dermal Fillers — Juvederm Collection</a>
                  <div class="h-px bg-white/10"></div>
                  <!-- PRP/PRF combinado -->
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/prp-microneedling">PRP/PRF</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/smooth-threads">Smooth Threads</a>
                </div>
              </div>
            </details>

            <!-- Laser: sin submenú, solo link -->
            <a class="block px-4 py-3 rounded-xl border border-white/10 hover:bg-white/5 focus:bg-white/5" href="/services/aerolase">Laser</a>

            <!-- Advanced Skin Care -->
            <details class="group rounded-xl border border-white/10 bg-white/5 open:bg-white/[0.08] open:border-white/20 transition-colors">
              <summary class="list-none cursor-pointer flex items-center justify-between px-4 py-3">
                <span class="font-medium">Advanced Skin Care</span>
                <svg class="w-5 h-5 transition-transform group-open:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z"/></svg>
              </summary>
              <div class="px-2 pb-2">
                <div class="mx-2 rounded-lg bg-white/5 ring-1 ring-white/10">
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/skinpen-microneedling">SkinPen® Microneedling</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/chemical-peels">Chemical Peels</a>
                  <div class="h-px bg-white/10"></div>
                  <!-- Specialty → Signature (texto) -->
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/specialty-facials">Signature Facials</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/acne-programs">Acne Programs</a>
                </div>
              </div>
            </details>

            <!-- Wellness & IV -->
            <details class="group rounded-xl border border-white/10 bg-white/5 open:bg-white/[0.08] open:border-white/20 transition-colors">
              <summary class="list-none cursor-pointer flex items-center justify-between px-4 py-3">
                <span class="font-medium">Wellness &amp; IV</span>
                <svg class="w-5 h-5 transition-transform group-open:rotate-180" viewBox="0 0 20 20" fill="currentColor"><path d="M5.8 7.3a1 1 0 011.4 0L10 10.1l2.8-2.8a1 1 0 111.4 1.4l-3.5 3.5a1 1 0 01-1.4 0L5.8 8.7a1 1 0 010-1.4z"/></svg>
              </summary>
              <div class="px-2 pb-2">
                <div class="mx-2 rounded-lg bg-white/5 ring-1 ring-white/10">
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/vitamin-injections">Vitamin Injections</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/iv-therapy">IV Therapy</a>
                  <div class="h-px bg-white/10"></div>
                  <a class="block px-4 py-3 hover:bg-white/10 focus:bg-white/10" href="/services/therapeutic-massage">Therapeutic Massage</a>
                </div>
              </div>
            </details>

            <!-- Enlaces simples -->
            <a class="block px-4 py-3 rounded-xl border border-white/10 hover:bg-white/5 focus:bg-white/10" href="/about-us">About Us</a>
            <a class="block px-4 py-3 rounded-xl border border-white/10 hover:bg-white/5 focus:bg-white/10" href="/contact-us">Contact Us</a>
          </div>

          <!-- Separador degradado + logo (se mantiene) -->
          <div class="mt-12 px-6">
            <div class="h-[2px] w-full bg-gradient-to-r from-transparent via-white to-transparent"></div>
            <a href="/" class="mt-6 w-full flex items-baseline justify-center gap-2 text-center" aria-label="Home">
              <span class="text-white/95 font-semibold tracking-[0.06em] text-[18px] leading-none">D-Essence</span>
              <span class="text-white/70 font-medium tracking-wide text-[14px] leading-none">Wellness</span>
            </a>
          </div>
        </nav>
      </div>
    </aside>

    <!-- ===== MAIN SLOT ===== -->
    <main><slot /></main>

    <!-- ===== FOOTER (claro, sin CTA superior ni fondo negro) ===== -->
    <footer class="mt-24 border-t border-neutral-200 bg-white">
      <div class="container mx-auto px-4">
        <!-- (CTA superior ELIMINADO) -->

        <!-- Middle: brand + columns -->
        <section class="py-10">
          <div class="grid gap-10 md:grid-cols-4 text-neutral-800">
            <!-- Brand & socials -->
            <div>
              <div class="text-neutral-900 font-semibold tracking-[0.06em] text-lg">
